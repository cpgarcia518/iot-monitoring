# Read current weather and forecasts data from openweathermap.org
# [[inputs.openweathermap]]
#   ## OpenWeatherMap API key.
#   app_id = "$OWM_API_KEY"
#   city_id = ["${OWM_CITY_ID}"]
#   lang = "en"

#   ## APIs to fetch; can contain "weather" or "forecast".
#   fetch = ["weather"]

#   ## OpenWeatherMap base URL
#   # base_url = "https://api.openweathermap.org/"

#   ## Timeout for HTTP response.
#   # response_timeout = "5s"

#   ## Preferred unit system for temperature and wind speed. Can be one of
#   ## "metric", "imperial", or "standard".
#   units = "metric"

#   ## Query interval; OpenWeatherMap weather data is updated every 10
#   ## minutes.
#   interval = "2m"

#   # Add tags for better organization
#   [inputs.openweathermap.tags]
#     data_source = "openweathermap"

[[inputs.http]]
  urls        = [
    "https://${OWM_API_URL}/data/${OWM_API_VERSION}/weather?lat=${LATITUDE}&lon=${LONGITUDE}&appid=${OWM_API_KEY}&units=metric"
  ]
  timeout     = "10s"
  interval    = "10m"
  data_format = "json"

  ## Keep the five weather fields plus the city "id"
  fieldinclude   = ["main_temp","wind_speed","wind_gust","main_pressure","main_humidity","id"]

  tagexclude  = ["url"]

  [inputs.http.tags]
    source = "openweathermap"